head	1.3;
branch	1.1.221;
access;
symbols
	pax-20120606-2+deb7u1:1.1.221.6
	wheezy:1.1.221.6.0.2
	pax-20120606-3:1.1.221.6
	pax-20120606-2:1.1.221.6
	pax-20120606-1:1.1.221.6
	pax-20120606:1.1.221.6
	pax-20120605-1:1.1.221.6
	pax-20120605:1.1.221.6
	pax-20120520-1:1.1.221.5
	pax-20120520:1.1.221.5
	pax-20120216-2:1.1.221.5
	pax-20120216-1:1.1.221.5
	pax-20120216:1.1.221.5
	pax-20120212-1:1.1.221.4
	pax-20120212:1.1.221.4
	pax-20120211-1:1.1.221.4
	pax-20120211:1.1.221.4
	mircpio_20110817:1.1.221.3
	mircpio-20091122:1.1.221.2
	mircpio-20080906:1.1.221.1
	origtgz:1.1.221;
locks; strict;
comment	@.\" @;
expand	@b@;


1.3
date	2011.08.17.09.23.30;	author tg;	state Exp;
branches;
next	1.2;
commitid	1004E4B888605F0E083;

1.2
date	2011.07.28.17.19.19;	author tg;	state Exp;
branches;
next	1.1;
commitid	1004E319A26263D388B;

1.1
date	2011.07.28.16.48.00;	author tg;	state Exp;
branches
	1.1.221.1;
next	;
commitid	1004E3192C8046E063B;

1.1.221.1
date	2011.07.28.16.48.00;	author tg;	state Exp;
branches;
next	1.1.221.2;
commitid	1004E3192C8046E063B;

1.1.221.2
date	2011.07.28.17.11.40;	author tg;	state Exp;
branches;
next	1.1.221.3;
commitid	1004E31985F24E6CB4D;

1.1.221.3
date	2011.08.17.09.18.25;	author tg;	state Exp;
branches;
next	1.1.221.4;
commitid	1004E4B875015FAFEA7;

1.1.221.4
date	2012.02.12.02.23.13;	author tg;	state Exp;
branches;
next	1.1.221.5;
commitid	1004F372297099197B4;

1.1.221.5
date	2012.02.16.17.56.52;	author tg;	state Exp;
branches;
next	1.1.221.6;
commitid	1004F3D436E207CDFC6;

1.1.221.6
date	2012.06.05.19.31.52;	author tg;	state Exp;
branches;
next	;
commitid	1004FCE5EBC0C8B75D5;


desc
@@


1.3
log
@merge upstream source into packaging branch and release
(we build from unmodified sources once again, yay!)

sponsored by tarent solutions GmbH
@
text
@.\"	$MirOS: src/bin/pax/cpio.1,v 1.26 2011/08/17 09:03:58 tg Exp $
.\"	$OpenBSD: cpio.1,v 1.26 2007/05/31 19:19:15 jmc Exp $
.\"
.\" Copyright (c) 2005, 2009, 2011
.\"	Thorsten Glaser <tg@@mirbsd.org>
.\" Copyright (c) 1997 SigmaSoft, Th. Lockert
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"-
.\" Try to make GNU groff and AT&T nroff more compatible
.\" * ` generates ‘ in gnroff, so use \`
.\" * ' generates ’ in gnroff, \' generates ´, so use \*(aq
.\" * - generates ‐ in gnroff, \- generates −, so .tr it to -
.\"   thus use - for hyphens and \- for minus signs and option dashes
.\" * ~ is size-reduced and placed atop in groff, so use \*(TI
.\" * ^ is size-reduced and placed atop in groff, so use \*(ha
.\" * \(en does not work in nroff, so use \*(en
.\" The section after the "doc" macropackage has been loaded contains
.\" additional code to convene between the UCB mdoc macropackage (and
.\" its variant as BSD mdoc in groff) and the GNU mdoc macropackage.
.\"
.ie \n(.g \{\
.	if \*[.T]ascii .tr \-\N'45'
.	if \*[.T]latin1 .tr \-\N'45'
.	if \*[.T]utf8 .tr \-\N'45'
.	ds <= \[<=]
.	ds >= \[>=]
.	ds Rq \[rq]
.	ds Lq \[lq]
.	ds sL \(aq
.	ds sR \(aq
.	if \*[.T]utf8 .ds sL `
.	if \*[.T]ps .ds sL `
.	if \*[.T]utf8 .ds sR '
.	if \*[.T]ps .ds sR '
.	ds aq \(aq
.	ds TI \(ti
.	ds ha \(ha
.	ds en \(en
.\}
.el \{\
.	ds aq '
.	ds TI ~
.	ds ha ^
.	ds en \(em
.\}
.\"
.\" Implement .Dd with the Mdocdate RCS keyword
.\"
.rn Dd xD
.de Dd
.ie \\$1$Mdocdate: \{\
.	xD \\$2 \\$3, \\$4
.\}
.el .xD \\$1 \\$2 \\$3 \\$4 \\$5 \\$6 \\$7 \\$8
..
.\"
.\" .Dd must come before definition of .Mx, because when called
.\" with -mandoc, it might implement .Mx itself, but we want to
.\" use our own definition. And .Dd must come *first*, always.
.\"
.Dd $Mdocdate: August 17 2011 $
.\"
.\" Check which macro package we use
.\"
.ie \n(.g \{\
.	ie d volume-ds-1 .ds tT gnu
.	el .ds tT bsd
.\}
.el .ds tT ucb
.\"
.\" Implement .Mx (MirBSD)
.\"
.ie "\*(tT"gnu" \{\
.	eo
.	de Mx
.	nr curr-font \n[.f]
.	nr curr-size \n[.ps]
.	ds str-Mx \f[\n[curr-font]]\s[\n[curr-size]u]
.	ds str-Mx1 \*[Tn-font-size]\%MirOS\*[str-Mx]
.	if !\n[arg-limit] \
.	if \n[.$] \{\
.	ds macro-name Mx
.	parse-args \$@@
.	\}
.	if (\n[arg-limit] > \n[arg-ptr]) \{\
.	nr arg-ptr +1
.	ie (\n[type\n[arg-ptr]] == 2) \
.	as str-Mx1 \~\*[arg\n[arg-ptr]]
.	el \
.	nr arg-ptr -1
.	\}
.	ds arg\n[arg-ptr] "\*[str-Mx1]
.	nr type\n[arg-ptr] 2
.	ds space\n[arg-ptr] "\*[space]
.	nr num-args (\n[arg-limit] - \n[arg-ptr])
.	nr arg-limit \n[arg-ptr]
.	if \n[num-args] \
.	parse-space-vector
.	print-recursive
..
.	ec
.	ds sP \s0
.	ds tN \*[Tn-font-size]
.\}
.el \{\
.	de Mx
.	nr cF \\n(.f
.	nr cZ \\n(.s
.	ds aa \&\f\\n(cF\s\\n(cZ
.	if \\n(aC==0 \{\
.		ie \\n(.$==0 \&MirOS\\*(aa
.		el .aV \\$1 \\$2 \\$3 \\$4 \\$5 \\$6 \\$7 \\$8 \\$9
.	\}
.	if \\n(aC>\\n(aP \{\
.		nr aP \\n(aP+1
.		ie \\n(C\\n(aP==2 \{\
.			as b1 \&MirOS\ #\&\\*(A\\n(aP\\*(aa
.			ie \\n(aC>\\n(aP \{\
.				nr aP \\n(aP+1
.				nR
.			\}
.			el .aZ
.		\}
.		el \{\
.			as b1 \&MirOS\\*(aa
.			nR
.		\}
.	\}
..
.\}
.\"-
.ie \ng==1 \{\
.	ds nc mircpio
.	ds np mirpax
.	ds nt mirtar
.	ds nm mircpio
.	Dt MIRCPIO 1
.\}
.el \{\
.	ds nc cpio
.	ds np pax
.	ds nt tar
.	ds nm cpio
.	Dt CPIO 1
.\}
.\"-
.Os MirBSD
.Sh NAME
.ie \ng==1 \{\
.Nm mircpio
.Nd copy file archives in and out
.\}
.el \{\
.Nm cpio
.Nd copy file archives in and out
.\}
.Sh SYNOPSIS
.Nm \*(nm
.Fl o
.Op Fl AaBcLvZz
.Op Fl C Ar bytes
.Op Fl F Ar archive
.Op Fl H Ar format
.Op Fl M Ar flag
.Op Fl O Ar archive
.Ar \*(Lt name-list
.Op Ar \*(Gt archive
.Nm \*(nm
.Fl i
.Op Fl 6BbcdfmrSstuvZz
.Op Fl C Ar bytes
.Op Fl E Ar file
.Op Fl F Ar archive
.Op Fl H Ar format
.Op Fl I Ar archive
.Op Ar pattern ...
.Op Ar \*(Lt archive
.Nm \*(nm
.Fl p
.Op Fl adLlmuv
.Ar destination-directory
.Ar \*(Lt name-list
.Sh DESCRIPTION
The
.Nm
command copies files to and from a
.Nm cpio
archive.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl o
Create an archive.
Reads the list of files to store in the
archive from standard input, and writes the archive on standard
output.
.Bl -tag -width Ds
.It Fl A
Append to the specified archive.
.It Fl a
Reset the access times on files that have been copied to the
archive.
.It Fl B
Set block size of output to 5120 bytes.
.It Fl C Ar bytes
Set the block size of output to
.Ar bytes .
.It Fl c
Use ASCII format for
.Nm
header for portability.
.It Fl F Ar archive
Use the specified file as the input for the archive.
.It Fl H Ar format
Write the archive in the specified format.
Recognised formats are:
.Pp
.Bl -tag -width sv4cpio -compact
.It Ar ar
Unix Archiver.
.It Ar bcpio
Old binary
.Nm
format.
Selected by
.Fl 6 .
.It Ar cpio
Old octal character
.Nm
format.
Selected by
.Fl c .
.It Ar sv4cpio
SVR4 hex
.Nm
format.
.It Ar sv4crc
SVR4 hex
.Nm
format with checksums.
This is the default format for creating new archives.
.It Ar tar
Old tar format.
.It Ar ustar
POSIX ustar format.
.It "\ "
.It Ar bin
These
.It Ar crc
four
.It Ar newc
formats
.It Ar odc
are supported for backwards compatibility only.
.El
.It Fl L
Follow symbolic links.
.It Fl M Ar flag
Configure the archive normaliser.
.Ar flag
is either a numeric value compatible to
.Xr strtonum 3
which is directly stored in the flags word, or
one of the following values, optionally prefixed with
.Dq no\-
to turn them off:
.Pp
.Bl -tag -width xxxxxx -compact
.It Ar inodes
0x0001: Serialise inodes, zero device info.
.br
(cpio, sv4cpio, sv4crc)
.It Ar links
0x0002: Store content of hard links only once.
.br
(cpio, sv4cpio, sv4crc)
.It Ar mtime
0x0004: Zero out the file modification time.
.br
(ar, cpio, sv4cpio, sv4crc, ustar)
.It Ar uidgid
0x0008: Set owner to 0:0 (root:wheel).
.br
(ar, cpio, sv4cpio, sv4crc, ustar)
.It Ar verb
0x0010: Debug this option.
.It Ar debug
0x0020: Debug file header storage.
.It Ar lncp
0x0040: Extract hard links by copy if link fails.
.It Ar numid
0x0080: Use only numeric uid and gid values.
.br
(ustar)
.It Ar gslash
0x0100: Append a slash after directory names.
.br
(ustar)
.It Ar set
0x0003: Keep ownership and mtime intact.
.It Ar dist
0x008B: Clean everything except mtime.
.It Ar norm
0x008F: Clean everything.
.It Ar root
0x0089: Clean owner and device information.
.El
.Pp
This option is only implemented for the ar, cpio, sv4cpio,
sv4crc, and ustar file format writing routines.
.It Fl O Ar archive
Use the specified file name as the archive to write to.
.It Fl v
Be verbose about operations.
List filenames as they are written to the archive.
.It Fl Z
Compress archive using
.Xr compress 1
format.
.It Fl z
Compress archive using
.Xr gzip 1
format.
.El
.It Fl i
Restore files from an archive.
Reads the archive file from
standard input and extracts files matching the
.Ar patterns
that were specified on the command line.
.Bl -tag -width Ds
.It Fl 6
Process old-style
.Nm
format archives.
.It Fl B
Set the block size of the archive being read to 5120 bytes.
.It Fl b
Do byte and word swapping after reading in data from the
archive, for restoring archives created on systems with
a different byte order.
.It Fl C Ar bytes
Read archive written with a block size of
.Ar bytes .
.It Fl c
Expect the archive headers to be in ASCII format.
.It Fl d
Create any intermediate directories as needed during
restore.
.It Fl E Ar file
Read list of file name patterns to extract or list from
.Ar file .
.It Fl F Ar archive , Fl I Ar archive
Use the specified file as the input for the archive.
.It Fl f
Restore all files except those matching the
.Ar patterns
given on the command line.
.It Fl H Ar format
Read an archive of the specified format.
Recognised formats are:
.Pp
.Bl -tag -width sv4cpio -compact
.It Ar ar
Unix Archiver.
.It Ar bcpio
Old binary
.Nm
format.
.It Ar cpio
Old octal character
.Nm
format.
.It Ar sv4cpio
SVR4 hex
.Nm
format.
.It Ar sv4crc
SVR4 hex
.Nm
format with checksums.
.It Ar tar
Old tar format.
.It Ar ustar
POSIX ustar format.
.It "\ "
.It Ar bin
These
.It Ar crc
four
.It Ar newc
formats
.It Ar odc
are supported for backwards compatibility only.
.El
.It Fl m
Restore modification times on files.
.It Fl r
Rename restored files interactively.
.It Fl S
Swap words after reading data from the archive.
.It Fl s
Swap bytes after reading data from the archive.
.It Fl t
Only list the contents of the archive, no files or
directories will be created.
.It Fl u
Overwrite files even when the file in the archive is
older than the one that will be overwritten.
.It Fl v
Be verbose about operations.
List filenames as they are copied in from the archive.
.It Fl Z
Uncompress archive using
.Xr compress 1
format.
.It Fl z
Uncompress archive using
.Xr gzip 1
format.
.El
.It Fl p
Copy files from one location to another in a single pass.
The list of files to copy are read from standard input and
written out to a directory relative to the specified
.Ar directory
argument.
.Bl -tag -width Ds
.It Fl a
Reset the access times on files that have been copied.
.It Fl d
Create any intermediate directories as needed to write
the files at the new location.
.It Fl L
Follow symbolic links.
.It Fl l
When possible, link files rather than creating an
extra copy.
.It Fl m
Restore modification times on files.
.It Fl u
Overwrite files even when the original file being copied is
older than the one that will be overwritten.
.It Fl v
Be verbose about operations.
List filenames as they are copied.
.El
.El
.Sh ENVIRONMENT
.Bl -tag -width Fl
.It Ev TMPDIR
Path in which to store temporary files.
.El
.Sh ERRORS
.Nm
will exit with one of the following values:
.Bl -tag -width 2n
.It 0
All files were processed successfully.
.It 1
An error occurred.
.El
.Pp
Whenever
.Nm
cannot create a file or a link when extracting an archive or cannot
find a file while writing an archive, or cannot preserve the user
ID, group ID, file mode, or access and modification times when the
.Fl p
option is specified, a diagnostic message is written to standard
error and a non-zero exit value will be returned, but processing
will continue.
In the case where
.Nm
cannot create a link to a file,
unless
.Fl M Ar lncp
is given,
.Nm
will not create a second copy of the file.
.Pp
If the extraction of a file from an archive is prematurely terminated
by a signal or error,
.Nm
may have only partially extracted the file the user wanted.
Additionally, the file modes of extracted files and directories may
have incorrect file bits, and the modification and access times may
be wrong.
.Pp
If the creation of an archive is prematurely terminated by a signal
or error,
.Nm
may have only partially created the archive, which may violate the
specific archive format specification.
.Sh SEE ALSO
.Xr ar 1 ,
.if \ng==1 \{\
.Xr cpio 1 ,
.Xr deb 5 ,
.Xr mirpax 1 ,
.Xr mirtar 1 ,
.\}
.Xr pax 1 ,
.Xr tar 1
.Sh AUTHORS
Keith Muller at the University of California, San Diego.
.Sh CAVEATS
Different file formats have different maximum file sizes.
It is recommended that a format such as cpio or ustar
be used for larger files.
.Pp
.Bl -column "File format" "Maximum file size" -offset indent -compact
.It Sy "File format" Ta Sy "Maximum file size"
.It ar Ta 10 Gigabytes \- 1 Byte
.It bcpio Ta 4 Gibibytes
.It sv4cpio Ta 4 Gibibytes
.It cpio Ta 8 Gibibytes
.It tar Ta 8 Gibibytes
.It ustar Ta 8 Gibibytes
.El
.Pp
The backwards-compatible format options are not available in the
.Xr \*(np 1
front-end.
.Pp
The
.Fl M
option is a MirBSD extensions, available starting with
.Mx 8 .
Archives written using these options are, however, compatible to
the standard and should be readable on any other system.
The only option whose behaviour is not explicitly allowed by the
standard is hard link unification (write file contens only once)
selected by
.Fl M Ar 0x0002 .
.Pp
The
.Ar ar
file format matches APT repositories and the BSD
.Xr ar 1
specification, not GNU binutils or SYSV systems.
.Sh BUGS
The
.Fl s
and
.Fl S
options are currently not implemented.
@


1.2
log
@switch to new packaging style
@
text
@d1 1
a1 1
.\"	$MirOS: src/bin/pax/cpio.1,v 1.21 2009/11/22 18:23:40 tg Exp $
d4 2
a5 1
.\" Copyright (c) 2005, 2009 Thorsten Glaser <tg@@mirbsd.org>
d81 1
a81 1
.Dd $Mdocdate: November 22 2009 $
d152 15
a166 1
.Dt CPIO 1
d169 1
d172 5
d178 1
a178 1
.Nm mircpio
d188 1
a188 1
.Nm mircpio
d198 1
a198 1
.Nm mircpio
d207 1
a207 1
.Nm
d239 2
d284 1
a284 1
one of the following values, prefixed with
d286 1
a286 1
to turn them off, or not, to turn them on:
d291 2
d295 2
d299 2
d303 2
a304 8
.It Ar dist
0x000B: Clean everything except mtime.
.It Ar set
0x0003: Keep ownership and mtime intact.
.It Ar norm
0x000F: Clean everything.
.It Ar root
0x0009: Clean owner and device information.
d310 17
a326 1
0x0040: Extract hard links by copying if linking fails.
d329 1
a329 1
This option is only implemented for the cpio, sv4cpio,
a330 5
For the ustar format, the
.Ar inodes
and
.Ar links
specifiers are ignored.
d384 2
d516 7
d534 1
d541 1
a541 7
.Sh BUGS
The
.Fl s
and
.Fl S
options are currently not implemented.
.Sh CAVEATS
d543 1
a543 1
.Xr pax 1
d556 12
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
.\"	$MirOS: src/bin/pax/cpio.1,v 1.17 2008/03/14 17:05:06 tg Exp $
d4 1
a4 1
.\" Copyright (c) 2005 Thorsten Glaser <tg@@66h.42h.de>
a26 3
.\"
.\"	$OpenBSD: cpio.1,v 1.26 2007/05/31 19:19:15 jmc Exp $
.\"
d29 3
a31 3
.\" * ` generates ‘ in groff, so use \`
.\" * ' generates ’ in groff, \' generates ´, so use \*(aq
.\" * - generates ‐ in groff, \- generates −, fixed in tmac/mdoc/doc-groff
d36 4
d41 13
d67 1
d79 10
a88 1
.Dd $Mdocdate: March 14 2008 $
d91 32
a122 7
.de Mx
.nr cF \\n(.f
.nr cZ \\n(.s
.ds aa \&\f\\n(cF\s\\n(cZ
.if \\n(aC==0 \{\
.	ie \\n(.$==0 \&MirOS\\*(aa
.	el .aV \\$1 \\$2 \\$3 \\$4 \\$5 \\$6 \\$7 \\$8 \\$9
d124 21
a144 6
.if \\n(aC>\\n(aP \{\
.	nr aP \\n(aP+1
.	ie \\n(C\\n(aP==2 \{\
.		as b1 \&MirOS\ #\&\\*(A\\n(aP\\*(aa
.		ie \\n(aC>\\n(aP \{\
.			nr aP \\n(aP+1
a146 5
.		el .aZ
.	\}
.	el \{\
.		as b1 \&MirOS\\*(aa
.		nR
d148 1
d150 1
a150 1
..
d154 1
a154 1
.Nm cpio
d157 1
a157 1
.Nm cpio
d167 1
a167 1
.Nm cpio
d177 1
a177 1
.Nm cpio
d262 1
a262 1
.Dq no-
d286 2
d460 3
@


1.1.221.1
log
@Import mircpio_20080906.orig.tar.gz
(even though this package needs a general rework, and -M dirslash too)
@
text
@@


1.1.221.2
log
@Import paxmirabilis-20091122.cpio.gz
@
text
@d1 1
a1 1
.\"	$MirOS: src/bin/pax/cpio.1,v 1.21 2009/11/22 18:23:40 tg Exp $
d4 1
a4 1
.\" Copyright (c) 2005, 2009 Thorsten Glaser <tg@@mirbsd.org>
d27 3
d32 3
a34 3
.\" * ` generates ‘ in gnroff, so use \`
.\" * ' generates ’ in gnroff, \' generates ´, so use \*(aq
.\" * - generates ‐ in gnroff, \- generates −, so .tr it to -
a38 4
.\" The section after the "doc" macropackage has been loaded contains
.\" additional code to convene between the UCB mdoc macropackage (and
.\" its variant as BSD mdoc in groff) and the GNU mdoc macropackage.
.\"
a39 13
.	if \*[.T]ascii .tr \-\N'45'
.	if \*[.T]latin1 .tr \-\N'45'
.	if \*[.T]utf8 .tr \-\N'45'
.	ds <= \[<=]
.	ds >= \[>=]
.	ds Rq \[rq]
.	ds Lq \[lq]
.	ds sL \(aq
.	ds sR \(aq
.	if \*[.T]utf8 .ds sL `
.	if \*[.T]ps .ds sL `
.	if \*[.T]utf8 .ds sR '
.	if \*[.T]ps .ds sR '
a52 1
.\"
d64 1
a64 10
.\"
.Dd $Mdocdate: November 22 2009 $
.\"
.\" Check which macro package we use
.\"
.ie \n(.g \{\
.	ie d volume-ds-1 .ds tT gnu
.	el .ds tT bsd
.\}
.el .ds tT ucb
d67 7
a73 32
.\"
.ie "\*(tT"gnu" \{\
.	eo
.	de Mx
.	nr curr-font \n[.f]
.	nr curr-size \n[.ps]
.	ds str-Mx \f[\n[curr-font]]\s[\n[curr-size]u]
.	ds str-Mx1 \*[Tn-font-size]\%MirOS\*[str-Mx]
.	if !\n[arg-limit] \
.	if \n[.$] \{\
.	ds macro-name Mx
.	parse-args \$@@
.	\}
.	if (\n[arg-limit] > \n[arg-ptr]) \{\
.	nr arg-ptr +1
.	ie (\n[type\n[arg-ptr]] == 2) \
.	as str-Mx1 \~\*[arg\n[arg-ptr]]
.	el \
.	nr arg-ptr -1
.	\}
.	ds arg\n[arg-ptr] "\*[str-Mx1]
.	nr type\n[arg-ptr] 2
.	ds space\n[arg-ptr] "\*[space]
.	nr num-args (\n[arg-limit] - \n[arg-ptr])
.	nr arg-limit \n[arg-ptr]
.	if \n[num-args] \
.	parse-space-vector
.	print-recursive
..
.	ec
.	ds sP \s0
.	ds tN \*[Tn-font-size]
d75 6
a80 21
.el \{\
.	de Mx
.	nr cF \\n(.f
.	nr cZ \\n(.s
.	ds aa \&\f\\n(cF\s\\n(cZ
.	if \\n(aC==0 \{\
.		ie \\n(.$==0 \&MirOS\\*(aa
.		el .aV \\$1 \\$2 \\$3 \\$4 \\$5 \\$6 \\$7 \\$8 \\$9
.	\}
.	if \\n(aC>\\n(aP \{\
.		nr aP \\n(aP+1
.		ie \\n(C\\n(aP==2 \{\
.			as b1 \&MirOS\ #\&\\*(A\\n(aP\\*(aa
.			ie \\n(aC>\\n(aP \{\
.				nr aP \\n(aP+1
.				nR
.			\}
.			el .aZ
.		\}
.		el \{\
.			as b1 \&MirOS\\*(aa
d83 5
d89 1
a90 2
.\}
.\"-
d202 1
a202 1
.Dq no\-
a225 2
.It Ar lncp
0x0040: Extract hard links by copying if linking fails.
a397 3
unless
.Fl M Ar lncp
is given,
@


1.1.221.3
log
@Import distfile into vendor branch
-r--r--r--  1 tg  miros-cvssrc  136185 Aug 17 09:14 /MirOS/dist/mir/cpio/paxmirabilis-20110817.cpio.gz
-rw-r--r--  1 tg  tg            138201 Aug 17 09:14 paxmirabilis_20110817.orig.tar.gz
@
text
@d1 1
a1 1
.\"	$MirOS: src/bin/pax/cpio.1,v 1.26 2011/08/17 09:03:58 tg Exp $
d4 1
a4 2
.\" Copyright (c) 2005, 2009, 2011
.\"	Thorsten Glaser <tg@@mirbsd.org>
d80 1
a80 1
.Dd $Mdocdate: August 17 2011 $
d151 1
a151 15
.ie \ng==1 \{\
.	ds nc mircpio
.	ds np mirpax
.	ds nt mirtar
.	ds nm mircpio
.	Dt MIRCPIO 1
.\}
.el \{\
.	ds nc cpio
.	ds np pax
.	ds nt tar
.	ds nm cpio
.	Dt CPIO 1
.\}
.\"-
a153 5
.ie \ng==1 \{\
.Nm mircpio
.Nd copy file archives in and out
.\}
.el \{\
a155 1
.\}
d157 1
a157 1
.Nm \*(nm
d167 1
a167 1
.Nm \*(nm
d177 1
a177 1
.Nm \*(nm
d186 1
a186 1
.Nm cpio
a217 2
.It Ar ar
Unix Archiver.
d261 1
a261 1
one of the following values, optionally prefixed with
d263 1
a263 1
to turn them off:
a267 2
.br
(cpio, sv4cpio, sv4crc)
a269 2
.br
(cpio, sv4cpio, sv4crc)
a271 2
.br
(ar, cpio, sv4cpio, sv4crc, ustar)
d274 8
a281 2
.br
(ar, cpio, sv4cpio, sv4crc, ustar)
d287 1
a287 17
0x0040: Extract hard links by copy if link fails.
.It Ar numid
0x0080: Use only numeric uid and gid values.
.br
(ustar)
.It Ar gslash
0x0100: Append a slash after directory names.
.br
(ustar)
.It Ar set
0x0003: Keep ownership and mtime intact.
.It Ar dist
0x008B: Clean everything except mtime.
.It Ar norm
0x008F: Clean everything.
.It Ar root
0x0089: Clean owner and device information.
d290 1
a290 1
This option is only implemented for the ar, cpio, sv4cpio,
d292 5
a349 2
.It Ar ar
Unix Archiver.
a479 7
.Xr ar 1 ,
.if \ng==1 \{\
.Xr cpio 1 ,
.Xr deb 5 ,
.Xr mirpax 1 ,
.Xr mirtar 1 ,
.\}
a490 1
.It ar Ta 10 Gigabytes \- 1 Byte
d497 7
a503 1
.Pp
d505 1
a505 1
.Xr \*(np 1
a517 12
.Pp
The
.Ar ar
file format matches APT repositories and the BSD
.Xr ar 1
specification, not GNU binutils or SYSV systems.
.Sh BUGS
The
.Fl s
and
.Fl S
options are currently not implemented.
@


1.1.221.4
log
@-rw-r--r--   1 tg  tg  138869 Feb 12 02:14 pax_20120211.orig.tar.gz
-rw-r--r--   1 tg  tg  136890 Feb 12 02:14 paxmirabilis-20120211.cpio.gz
@
text
@d1 2
a2 2
.\"	$MirOS: src/bin/pax/cpio.1,v 1.30 2012/02/12 01:48:20 tg Exp $
.\"	$OpenBSD: cpio.1,v 1.34 2011/09/03 22:59:08 jmc Exp $
d4 1
a4 1
.\" Copyright (c) 2005, 2009, 2011, 2012
d81 1
a81 1
.Dd $Mdocdate: February 12 2012 $
a158 7
.el .ie \ng==2 \{\
.	ds nc paxcpio
.	ds np pax
.	ds nt paxtar
.	ds nm paxcpio
.	Dt PAXCPIO 1
.\}
a172 4
.el .ie \ng==2 \{\
.Nm paxcpio
.Nd copy file archives in and out
.\}
d180 1
a180 1
.Op Fl AaBcJjLvZz
d186 2
a187 2
.No \*(Lt Ar name-list
.Op \*(Gt Ar archive
d190 1
a190 1
.Op Fl 6BbcdfJjmrSstuvZz
a195 1
.Op Fl M Ar flag
d197 1
a197 1
.Op \*(Lt Ar archive
d202 1
a202 1
.No \*(Lt Ar name-list
d230 1
a230 1
.Nm cpio
d243 1
a243 1
.Nm cpio
d249 1
a249 1
.Nm cpio
d255 1
a255 1
.Nm cpio
d259 1
a259 1
.Nm cpio
d268 1
a268 1
These four formats...
d270 1
a270 1
\&...are supported...
d272 1
a272 1
\&...for backwards...
d274 1
a274 1
\&...compatibility only.
a275 4
.It Fl J
Use the xz utility to compress the archive.
.It Fl j
Use the bzip2 utility to compress the archive.
d337 1
a337 1
Use the
d339 1
a339 1
utility to compress the archive.
d341 1
a341 1
Use the
d343 1
a343 1
utility to compress the archive.
d354 1
a354 1
.Nm cpio
d388 1
a388 1
.Nm cpio
d392 1
a392 1
.Nm cpio
d396 1
a396 1
.Nm cpio
d400 1
a400 1
.Nm cpio
d408 1
a408 1
These four formats...
d410 1
a410 1
\&...are supported...
d412 1
a412 1
\&...for backwards...
d414 1
a414 1
\&...compatibility only.
a415 4
.It Fl J
Use the xz utility to decompress the archive.
.It Fl j
Use the bzip2 utility to decompress the archive.
d434 1
a434 1
Use the
d436 1
a436 1
utility to decompress the archive.
d438 1
a438 1
Use the
d440 1
a440 1
utility to decompress the archive.
d474 1
a474 2
.Sh EXIT STATUS
The
d476 2
a477 3
utility exits with one of the following values:
.Pp
.Bl -tag -width Ds -offset indent -compact
d483 1
a483 1
.Sh DIAGNOSTICS
a522 7
.ie \ng==2 \{\
.Xr cpio 1 ,
.Xr deb 5 ,
.Xr pax 1 ,
.Xr paxtar 1 ,
.\}
.el \{\
a523 1
.\}
a526 4
.Pp
.Mx
extensions by
.An Thorsten Glaser Aq tg@@mirbsd.org .
d531 2
a532 1
.Bl -column "File format" "Maximum file size" -offset indent
d534 6
a539 6
.It ar Ta "10 Gigabytes \- 1 Byte"
.It bcpio Ta "4 Gibibytes"
.It sv4cpio Ta "4 Gibibytes"
.It cpio Ta "8 Gibibytes"
.It tar Ta "8 Gibibytes"
.It ustar Ta "8 Gibibytes"
d561 1
a561 1
specification, not GNU binutils (which can however read them) or SYSV systems.
@


1.1.221.5
log
@-rw-r--r--   1 tg    tg     - 138212 Feb 16 17:54 pax_20120216.orig.tar.gz
@
text
@d1 1
a1 1
.\"	$MirOS: src/bin/pax/cpio.1,v 1.31 2012/02/16 16:01:08 tg Exp $
d81 1
a81 1
.Dd $Mdocdate: February 16 2012 $
d191 1
a191 1
.Op Fl AaBcJjLVvZz
d201 1
a201 1
.Op Fl 6BbcdfJjmrSstuVvZz
d212 1
a212 1
.Op Fl adLlmuVv
a348 4
.It Fl V
Print a dot
.Pq Sq .\&
for each file written to the archive.
a449 4
.It Fl V
Print a dot
.Pq Sq .\&
for each file read from the archive.
a483 4
.It Fl V
Print a dot
.Pq Sq .\&
for each file copied.
d581 1
a581 1
option is a MirBSD extension, available starting with
a590 5
.Fl V
option is a GNU extension, available starting with
.Mx 11 .
.Pp
The
@


1.1.221.6
log
@import prospective paxmirabilis of today into mircpio debian packaging
@
text
@d1 1
a1 1
.\"	$MirOS: src/bin/pax/cpio.1,v 1.33 2012/06/05 19:29:33 tg Exp $
a36 2
.\" * <>| are problematic, so redefine and use \*(Lt\*(Gt\*(Ba
.\" Also make sure to use \& especially with two-letter words.
d81 1
a81 1
.Dd $Mdocdate: June 5 2012 $
d83 1
a83 1
.\" Check which macro package we use, and do other -mdoc setup.
a85 2
.	if \*[.T]utf8 .tr \[la]\*(Lt
.	if \*[.T]utf8 .tr \[ra]\*(Gt
a617 4
.Pp
The
.Ar pax
file format is not yet supported.
@


