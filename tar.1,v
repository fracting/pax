head	1.3;
branch	1.1.221;
access;
symbols
	pax-20120606-2+deb7u1:1.1.221.7
	wheezy:1.1.221.7.0.2
	pax-20120606-3:1.1.221.7
	pax-20120606-2:1.1.221.7
	pax-20120606-1:1.1.221.7
	pax-20120606:1.1.221.7
	pax-20120605-1:1.1.221.7
	pax-20120605:1.1.221.7
	pax-20120520-1:1.1.221.6
	pax-20120520:1.1.221.6
	pax-20120216-2:1.1.221.5
	pax-20120216-1:1.1.221.5
	pax-20120216:1.1.221.5
	pax-20120212-1:1.1.221.5
	pax-20120212:1.1.221.5
	pax-20120211-1:1.1.221.4
	pax-20120211:1.1.221.4
	mircpio_20110817:1.1.221.3
	mircpio-20091122:1.1.221.2
	mircpio-20080906:1.1.221.1
	origtgz:1.1.221;
locks; strict;
comment	@.\" @;
expand	@b@;


1.3
date	2011.08.17.09.23.31;	author tg;	state Exp;
branches;
next	1.2;
commitid	1004E4B888605F0E083;

1.2
date	2011.07.28.17.19.20;	author tg;	state Exp;
branches;
next	1.1;
commitid	1004E319A26263D388B;

1.1
date	2011.07.28.16.48.00;	author tg;	state Exp;
branches
	1.1.221.1;
next	;
commitid	1004E3192C8046E063B;

1.1.221.1
date	2011.07.28.16.48.00;	author tg;	state Exp;
branches;
next	1.1.221.2;
commitid	1004E3192C8046E063B;

1.1.221.2
date	2011.07.28.17.11.47;	author tg;	state Exp;
branches;
next	1.1.221.3;
commitid	1004E31985F24E6CB4D;

1.1.221.3
date	2011.08.17.09.18.33;	author tg;	state Exp;
branches;
next	1.1.221.4;
commitid	1004E4B875015FAFEA7;

1.1.221.4
date	2012.02.12.02.23.24;	author tg;	state Exp;
branches;
next	1.1.221.5;
commitid	1004F372297099197B4;

1.1.221.5
date	2012.02.12.03.01.21;	author tg;	state Exp;
branches;
next	1.1.221.6;
commitid	1004F372B8D7E4157FB;

1.1.221.6
date	2012.05.20.17.38.56;	author tg;	state Exp;
branches;
next	1.1.221.7;
commitid	1004FB92C473E896F98;

1.1.221.7
date	2012.06.05.19.32.01;	author tg;	state Exp;
branches;
next	;
commitid	1004FCE5EBC0C8B75D5;


desc
@@


1.3
log
@merge upstream source into packaging branch and release
(we build from unmodified sources once again, yay!)

sponsored by tarent solutions GmbH
@
text
@.\"	$MirOS: src/bin/pax/tar.1,v 1.18 2011/08/17 09:03:58 tg Exp $
.\"	$OpenBSD: tar.1,v 1.48 2007/05/31 19:19:15 jmc Exp $
.\"
.\" Copyright (c) 2005, 2008, 2009, 2011
.\"	Thorsten Glaser <tg@@mirbsd.org>
.\" Copyright (c) 1996 SigmaSoft, Th. Lockert
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"-
.\" Try to make GNU groff and AT&T nroff more compatible
.\" * ` generates ‘ in gnroff, so use \`
.\" * ' generates ’ in gnroff, \' generates ´, so use \*(aq
.\" * - generates ‐ in gnroff, \- generates −, so .tr it to -
.\"   thus use - for hyphens and \- for minus signs and option dashes
.\" * ~ is size-reduced and placed atop in groff, so use \*(TI
.\" * ^ is size-reduced and placed atop in groff, so use \*(ha
.\" * \(en does not work in nroff, so use \*(en
.\" The section after the "doc" macropackage has been loaded contains
.\" additional code to convene between the UCB mdoc macropackage (and
.\" its variant as BSD mdoc in groff) and the GNU mdoc macropackage.
.\"
.ie \n(.g \{\
.	if \*[.T]ascii .tr \-\N'45'
.	if \*[.T]latin1 .tr \-\N'45'
.	if \*[.T]utf8 .tr \-\N'45'
.	ds <= \[<=]
.	ds >= \[>=]
.	ds Rq \[rq]
.	ds Lq \[lq]
.	ds sL \(aq
.	ds sR \(aq
.	if \*[.T]utf8 .ds sL `
.	if \*[.T]ps .ds sL `
.	if \*[.T]utf8 .ds sR '
.	if \*[.T]ps .ds sR '
.	ds aq \(aq
.	ds TI \(ti
.	ds ha \(ha
.	ds en \(en
.\}
.el \{\
.	ds aq '
.	ds TI ~
.	ds ha ^
.	ds en \(em
.\}
.\"
.\" Implement .Dd with the Mdocdate RCS keyword
.\"
.rn Dd xD
.de Dd
.ie \\$1$Mdocdate: \{\
.	xD \\$2 \\$3, \\$4
.\}
.el .xD \\$1 \\$2 \\$3 \\$4 \\$5 \\$6 \\$7 \\$8
..
.\"
.\" .Dd must come before definition of .Mx, because when called
.\" with -mandoc, it might implement .Mx itself, but we want to
.\" use our own definition. And .Dd must come *first*, always.
.\"
.Dd $Mdocdate: August 17 2011 $
.\"
.\" Check which macro package we use
.\"
.ie \n(.g \{\
.	ie d volume-ds-1 .ds tT gnu
.	el .ds tT bsd
.\}
.el .ds tT ucb
.\"
.\" Implement .Mx (MirBSD)
.\"
.ie "\*(tT"gnu" \{\
.	eo
.	de Mx
.	nr curr-font \n[.f]
.	nr curr-size \n[.ps]
.	ds str-Mx \f[\n[curr-font]]\s[\n[curr-size]u]
.	ds str-Mx1 \*[Tn-font-size]\%MirOS\*[str-Mx]
.	if !\n[arg-limit] \
.	if \n[.$] \{\
.	ds macro-name Mx
.	parse-args \$@@
.	\}
.	if (\n[arg-limit] > \n[arg-ptr]) \{\
.	nr arg-ptr +1
.	ie (\n[type\n[arg-ptr]] == 2) \
.	as str-Mx1 \~\*[arg\n[arg-ptr]]
.	el \
.	nr arg-ptr -1
.	\}
.	ds arg\n[arg-ptr] "\*[str-Mx1]
.	nr type\n[arg-ptr] 2
.	ds space\n[arg-ptr] "\*[space]
.	nr num-args (\n[arg-limit] - \n[arg-ptr])
.	nr arg-limit \n[arg-ptr]
.	if \n[num-args] \
.	parse-space-vector
.	print-recursive
..
.	ec
.	ds sP \s0
.	ds tN \*[Tn-font-size]
.\}
.el \{\
.	de Mx
.	nr cF \\n(.f
.	nr cZ \\n(.s
.	ds aa \&\f\\n(cF\s\\n(cZ
.	if \\n(aC==0 \{\
.		ie \\n(.$==0 \&MirOS\\*(aa
.		el .aV \\$1 \\$2 \\$3 \\$4 \\$5 \\$6 \\$7 \\$8 \\$9
.	\}
.	if \\n(aC>\\n(aP \{\
.		nr aP \\n(aP+1
.		ie \\n(C\\n(aP==2 \{\
.			as b1 \&MirOS\ #\&\\*(A\\n(aP\\*(aa
.			ie \\n(aC>\\n(aP \{\
.				nr aP \\n(aP+1
.				nR
.			\}
.			el .aZ
.		\}
.		el \{\
.			as b1 \&MirOS\\*(aa
.			nR
.		\}
.	\}
..
.\}
.\"-
.ie \ng==1 \{\
.	ds nc mircpio
.	ds np mirpax
.	ds nt mirtar
.	ds nm mirtar
.	Dt MIRTAR 1
.\}
.el \{\
.	ds nc cpio
.	ds np pax
.	ds nt tar
.	ds nm tar
.	Dt TAR 1
.\}
.\"-
.Os MirBSD
.Sh NAME
.ie \ng==1 \{\
.Nm mirtar
.Nd tape archiver
.\}
.el \{\
.Nm tar
.Nd tape archiver
.\}
.Sh SYNOPSIS
.Nm \*(nm
.Sm off
.No { Cm crtux No } Op Cm 014578AbefHhLmOoPRSpqsvwXZz
.Sm on
.Bk -words
.Op Ar blocking-factor | archive | replstr
.Op Fl C Ar directory
.Op Fl I Ar file
.Op Ar file ...
.Ek
.Pp
.Nm \*(nm
.No { Ns Fl crtux Ns }
.Op Fl 014578AeHhLmOoPpqRSvwXZz
.Op Fl b Ar blocking-factor
.Op Fl C Ar directory
.Op Fl f Ar archive
.Op Fl I Ar file
.Op Fl M Ar flag
.Op Fl s Ar replstr
.Op Ar file ...
.Sh DESCRIPTION
The
.Nm
command creates, adds files to, or extracts files from an
archive file in
.Dq tar
format.
A tar archive is often stored on a magnetic tape, but can be
stored equally well on a floppy, CD-ROM, or in a regular disk file.
.Pp
In the first (legacy) form, all option flags except for
.Fl C
and
.Fl I
must be contained within the first argument to
.Nm
and must not be prefixed by a hyphen
.Pq Sq \- .
Option arguments, if any, are processed as subsequent arguments to
.Nm
and are processed in the order in which their corresponding option
flags have been presented on the command line.
.Pp
In the second and preferred form, option flags may be given in any order
and are immediately followed by their corresponding option argument
values.
.Pp
One of the following flags must be present:
.Bl -tag -width Ds
.It Fl c
Create new archive, or overwrite an existing archive,
adding the specified files to it.
.It Fl r
Append the named new files to existing archive.
Note that this will only work on media on which an end-of-file mark
can be overwritten.
.It Fl t
List contents of archive.
If any files are named on the
command line, only those files will be listed.
The
.Ar file
arguments may be specified as glob patterns (see
.Xr glob 3
for more information), in which case
.Nm
will list all archive members that match each pattern.
.It Fl u
Alias for
.Fl r .
.It Fl x
Extract files from archive.
If any files are named on the
command line, only those files will be extracted from the
archive.
The
.Ar file
arguments may be specified as glob patterns (see
.Xr glob 3
for more information), in which case
.Nm
will extract all archive members that match each pattern.
.Pp
If more than one copy of a file exists in the
archive, later copies will overwrite earlier copies during
extraction.
The file mode and modification time are preserved
if possible.
The file mode is subject to modification by the
.Xr umask 2 .
.El
.Pp
In addition to the flags mentioned above, any of the following
flags may be used:
.Bl -tag -width Ds
.It Fl A
Write Unix Archiver libraries instead of tape archives.
.It Fl b Ar blocking-factor
Set blocking factor to use for the archive.
.Nm
uses 512-byte blocks.
The default is 20, the maximum is 126.
Archives with a blocking factor larger than 63 violate the
.Tn POSIX
standard and will not be portable to all systems.
.It Fl C Ar directory
This is a positional argument which sets the working directory for the
following files.
When extracting, files will be extracted into
the specified directory; when creating, the specified files will be matched
from the directory.
.It Fl e
Stop after the first error.
.It Fl f Ar archive
Filename where the archive is stored.
Defaults to
.Pa /dev/rst0 .
.It Fl H
Follow symlinks given on the command line only.
.It Fl h
Follow symbolic links as if they were normal files
or directories.
In extract mode this means that a directory entry in the archive
will not overwrite an existing symbolic link, but rather what the
link ultimately points to.
.It Fl I Ar file
This is a positional argument which reads the names of files to
archive or extract from the given file, one per line.
.It Fl L
Synonym for the
.Fl h
option.
.It Fl M Ar flag
Configure the archive normaliser.
.Ar flag
is either a numeric value compatible to
.Xr strtonum 3
which is directly stored in the flags word, or
one of the following values, optionally prefixed with
.Dq no\-
to turn them off:
.Pp
.Bl -tag -width xxxxxx -compact
.It Ar inodes
0x0001: Serialise inodes, zero device info.
.br
(cpio, sv4cpio, sv4crc)
.It Ar links
0x0002: Store content of hard links only once.
.br
(cpio, sv4cpio, sv4crc)
.It Ar mtime
0x0004: Zero out the file modification time.
.br
(ar, cpio, sv4cpio, sv4crc, ustar)
.It Ar uidgid
0x0008: Set owner to 0:0 (root:wheel).
.br
(ar, cpio, sv4cpio, sv4crc, ustar)
.It Ar verb
0x0010: Debug this option.
.It Ar debug
0x0020: Debug file header storage.
.It Ar lncp
0x0040: Extract hard links by copy if link fails.
.It Ar numid
0x0080: Use only numeric uid and gid values.
.br
(ustar)
.It Ar gslash
0x0100: Append a slash after directory names.
.br
(ustar)
.It Ar set
0x0003: Keep ownership and mtime intact.
.It Ar dist
0x008B: Clean everything except mtime.
.It Ar norm
0x008F: Clean everything.
.It Ar root
0x0089: Clean owner and device information.
.El
.Pp
This option is only implemented for the ar, cpio, sv4cpio,
sv4crc, and ustar file format writing routines.
.It Fl m
Do not preserve modification time.
.It Fl O
If reading, extract files to standard output.
.br
If writing, write old-style (non-POSIX) archives.
.It Fl o
Don't write directory information that the older (V7) style
.Nm
is unable to decode.
This implies the
.Fl O
flag.
.It Fl P
Do not strip leading slashes
.Pq Sq /
from pathnames.
The default is to strip leading slashes.
.It Fl p
Preserve user and group ID as well as file mode regardless of
the current
.Xr umask 2 .
The setuid and setgid bits are only preserved if the user is
the superuser.
Only meaningful in conjunction with the
.Fl x
flag.
.It Fl q
Select the first archive member that matches each
.Ar file
operand.
No more than one archive member is matched for each
.Ar file .
When members of type directory are matched, the file hierarchy rooted at that
directory is also matched.
.It Fl R
Write SysVR4 CPIO files instead of tar or POSIX ustar files.
Serialise inode numbers, zero out device information.
The file content of hard links is stored only once.
.It Fl S
Write SysVR4 CPIO files with CRC instead of tar or POSIX ustar files.
Serialise inode numbers, zero out device information.
The file content of hard links is stored only once.
.It Fl s Ar replstr
Modify the archive member names according to the substitution expression
.Ar replstr ,
using the syntax of the
.Xr ed 1
utility regular expressions.
.Ar file
arguments may be given to restrict the list of archive members to those
specified.
.Pp
The format of these regular expressions is
.Pp
.Dl /old/new/[gp]
.Pp
As in
.Xr ed 1 ,
.Va old
is a basic regular expression (see
.Xr re_format 7 )
and
.Va new
can contain an ampersand
.Pq Ql & ,
.Ql \e Ns Em n
(where
.Em n
is a digit) back-references,
or subexpression matching.
The
.Va old
string may also contain newline characters.
Any non-null character can be used as a delimiter
.Po
.Ql /
is shown here
.Pc .
Multiple
.Fl s
expressions can be specified.
The expressions are applied in the order they are specified on the
command line, terminating with the first successful substitution.
.Pp
The optional trailing
.Cm g
continues to apply the substitution expression to the pathname substring,
which starts with the first character following the end of the last successful
substitution.
The first unsuccessful substitution stops the operation of the
.Cm g
option.
The optional trailing
.Cm p
will cause the final result of a successful substitution to be written to
standard error in the following format:
.Pp
.D1 Em original-pathname No \*(Gt\*(Gt Em new-pathname
.Pp
File or archive member names that substitute to the empty string
are not selected and will be skipped.
.It Fl v
Verbose operation mode.
.It Fl w
Interactively rename files.
This option causes
.Nm
to prompt the user for the filename to use when storing or
extracting files in an archive.
.It Fl X
Do not cross mount points in the file system.
.It Fl Z
Compress archive using
.Xr compress 1 .
.It Fl z
Compress archive using
.Xr gzip 1 .
.El
.Pp
The options
.Op Fl 014578
can be used to select one of the compiled-in backup devices,
.Pa /dev/rstN .
.Sh ENVIRONMENT
.Bl -tag -width Fl
.It Ev TMPDIR
Path in which to store temporary files.
.It Ev TAPE
Default tape device to use instead of
.Pa /dev/rst0 .
.El
.Sh FILES
.Bl -tag -width "/dev/rst0"
.It Pa /dev/rst0
default archive name
.El
.Sh EXAMPLES
Create an archive on the default tape drive, containing the files named
.Pa bonvole
and
.Pa sekve :
.Pp
.Dl $ \*(nm c bonvole sekve
.Pp
Output a
.Xr gzip 1
compressed archive containing the files
.Pa bonvole
and
.Pa sekve
to a file called
.Pa foriru.tar.gz :
.Pp
.Dl $ \*(nm zcf foriru.tar.gz bonvole sekve
.Pp
Verbosely create an archive, called
.Pa backup.tar.gz ,
of all files matching the shell
.Xr glob 3
function
.Pa *.c :
.Pp
.Dl $ \*(nm zcvf backup.tar.gz *.c
.Pp
Verbosely list, but do not extract, all files ending in
.Pa .jpeg
from a compressed archive named
.Pa backup.tar.gz .
Note that the glob pattern has been quoted to avoid expansion by the shell:
.Pp
.Dl $ \*(nm tvzf backup.tar.gz \*(aq*.jpeg\*(aq
.Pp
For more detailed examples, see
.Xr \*(np 1 .
.Sh DIAGNOSTICS
.Nm
will exit with one of the following values:
.Bl -tag -width 2n -offset indent
.It 0
All files were processed successfully.
.It 1
An error occurred.
.El
.Pp
Whenever
.Nm
cannot create a file or a link when extracting an archive or cannot
find a file while writing an archive, or cannot preserve the user
ID, group ID, file mode, or access and modification times when the
.Fl p
option is specified, a diagnostic message is written to standard
error and a non-zero exit value will be returned, but processing
will continue.
In the case where
.Nm
cannot create a link to a file,
unless
.Fl M Ar lncp
is given,
.Nm
will not create a second copy of the file.
.Pp
If the extraction of a file from an archive is prematurely terminated
by a signal or error,
.Nm
may have only partially extracted the file the user wanted.
Additionally, the file modes of extracted files and directories may
have incorrect file bits, and the modification and access times may
be wrong.
.Pp
If the creation of an archive is prematurely terminated by a signal
or error,
.Nm
may have only partially created the archive, which may violate the
specific archive format specification.
.Sh SEE ALSO
.Xr ar 1 ,
.Xr cpio 1 ,
.ie \ng==1 \{\
.Xr mircpio 1 ,
.Xr mirpax 1 ,
.Xr pax 1 ,
.Xr tar 1 ,
.Xr deb 5
.\}
.el \{\
.Xr pax 1
.\}
.Sh HISTORY
A
.Nm
command first appeared in
.At v7 .
.Sh AUTHORS
Keith Muller at the University of California, San Diego.
.Sh CAVEATS
The
.Fl L
flag is not portable to other versions of
.Nm
where it may have a different meaning.
The
.Fl R ,
.Fl S ,
and
.Fl M
options are extensions specific to
.Mx .
@


1.2
log
@switch to new packaging style
@
text
@d1 1
a1 1
.\"	$MirOS: src/bin/pax/tar.1,v 1.13 2009/11/22 18:23:40 tg Exp $
d4 2
a28 3
.\" Copyright (c) 2008, 2009
.\"	Thorsten “mirabilos” Glaser <tg@@mirbsd.org>
.\"-
d81 1
a81 1
.Dd $Mdocdate: November 22 2009 $
d152 15
a166 1
.Dt TAR 1
d169 1
d172 5
d178 1
a178 1
.Nm mirtar
d180 1
a180 1
.No { Cm crtux No } Op Cm 014578befHhLmOoPRSpqsvwXZz
d189 1
a189 1
.Nm mirtar
d191 1
a191 1
.Op Fl 014578eHhLmOoPpqRSvwXZz
d274 2
d314 4
a317 1
is either a number or a string, optionally prefixed with
d319 1
a319 4
to turn it off.
See
.Xr cpio 1
for a comprehensive list and compatibility notes.
d324 2
d328 2
d332 2
d336 6
d343 17
a359 1
0x0040: Extract hard links by copying if linking fails.
d362 1
a362 1
This option is only implemented for the cpio, sv4cpio,
a363 5
For the ustar format, the
.Ar inodes
and
.Ar links
specifiers are ignored.
d507 1
a507 1
.Dl $ mirtar c bonvole sekve
d518 1
a518 1
.Dl $ mirtar zcf foriru.tar.gz bonvole sekve
d527 1
a527 1
.Dl $ mirtar zcvf backup.tar.gz *.c
d535 1
a535 1
.Dl $ mirtar tvzf backup.tar.gz \*(aq*.jpeg\*(aq
d538 1
a538 1
.Xr pax 1 .
d581 1
d583 8
d592 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
.\"	$MirOS: src/bin/pax/tar.1,v 1.10 2008/03/14 17:05:06 tg Exp $
d26 3
a28 3
.\"
.\"	$OpenBSD: tar.1,v 1.48 2007/05/31 19:19:15 jmc Exp $
.\"
d31 3
a33 3
.\" * ` generates ‘ in groff, so use \`
.\" * ' generates ’ in groff, \' generates ´, so use \*(aq
.\" * - generates ‐ in groff, \- generates −, fixed in tmac/mdoc/doc-groff
d38 4
d43 13
d69 1
d81 10
a90 1
.Dd $Mdocdate: March 14 2008 $
d93 32
a124 7
.de Mx
.nr cF \\n(.f
.nr cZ \\n(.s
.ds aa \&\f\\n(cF\s\\n(cZ
.if \\n(aC==0 \{\
.	ie \\n(.$==0 \&MirOS\\*(aa
.	el .aV \\$1 \\$2 \\$3 \\$4 \\$5 \\$6 \\$7 \\$8 \\$9
d126 21
a146 6
.if \\n(aC>\\n(aP \{\
.	nr aP \\n(aP+1
.	ie \\n(C\\n(aP==2 \{\
.		as b1 \&MirOS\ #\&\\*(A\\n(aP\\*(aa
.		ie \\n(aC>\\n(aP \{\
.			nr aP \\n(aP+1
a148 5
.		el .aZ
.	\}
.	el \{\
.		as b1 \&MirOS\\*(aa
.		nR
d150 1
d152 1
a152 1
..
d156 1
a156 1
.Nm tar
d159 1
a159 1
.Nm tar
d170 1
a170 1
.Nm tar
d197 1
a197 1
.Pq Sq - .
d294 1
a294 1
.Dq no-
d309 2
d418 1
a418 1
.D1 Em original-pathname No >> Em new-pathname
d463 1
a463 1
.Dl $ tar c bonvole sekve
d474 1
a474 1
.Dl $ tar zcf foriru.tar.gz bonvole sekve
d483 1
a483 1
.Dl $ tar zcvf backup.tar.gz *.c
d491 1
a491 1
.Dl $ tar tvzf backup.tar.gz '*.jpeg'
d517 3
@


1.1.221.1
log
@Import mircpio_20080906.orig.tar.gz
(even though this package needs a general rework, and -M dirslash too)
@
text
@@


1.1.221.2
log
@Import paxmirabilis-20091122.cpio.gz
@
text
@d1 1
a1 1
.\"	$MirOS: src/bin/pax/tar.1,v 1.13 2009/11/22 18:23:40 tg Exp $
d26 3
a28 3
.\"-
.\" Copyright (c) 2008, 2009
.\"	Thorsten “mirabilos” Glaser <tg@@mirbsd.org>
d31 3
a33 3
.\" * ` generates ‘ in gnroff, so use \`
.\" * ' generates ’ in gnroff, \' generates ´, so use \*(aq
.\" * - generates ‐ in gnroff, \- generates −, so .tr it to -
a37 4
.\" The section after the "doc" macropackage has been loaded contains
.\" additional code to convene between the UCB mdoc macropackage (and
.\" its variant as BSD mdoc in groff) and the GNU mdoc macropackage.
.\"
a38 13
.	if \*[.T]ascii .tr \-\N'45'
.	if \*[.T]latin1 .tr \-\N'45'
.	if \*[.T]utf8 .tr \-\N'45'
.	ds <= \[<=]
.	ds >= \[>=]
.	ds Rq \[rq]
.	ds Lq \[lq]
.	ds sL \(aq
.	ds sR \(aq
.	if \*[.T]utf8 .ds sL `
.	if \*[.T]ps .ds sL `
.	if \*[.T]utf8 .ds sR '
.	if \*[.T]ps .ds sR '
a51 1
.\"
d63 1
a63 10
.\"
.Dd $Mdocdate: November 22 2009 $
.\"
.\" Check which macro package we use
.\"
.ie \n(.g \{\
.	ie d volume-ds-1 .ds tT gnu
.	el .ds tT bsd
.\}
.el .ds tT ucb
d66 7
a72 32
.\"
.ie "\*(tT"gnu" \{\
.	eo
.	de Mx
.	nr curr-font \n[.f]
.	nr curr-size \n[.ps]
.	ds str-Mx \f[\n[curr-font]]\s[\n[curr-size]u]
.	ds str-Mx1 \*[Tn-font-size]\%MirOS\*[str-Mx]
.	if !\n[arg-limit] \
.	if \n[.$] \{\
.	ds macro-name Mx
.	parse-args \$@@
.	\}
.	if (\n[arg-limit] > \n[arg-ptr]) \{\
.	nr arg-ptr +1
.	ie (\n[type\n[arg-ptr]] == 2) \
.	as str-Mx1 \~\*[arg\n[arg-ptr]]
.	el \
.	nr arg-ptr -1
.	\}
.	ds arg\n[arg-ptr] "\*[str-Mx1]
.	nr type\n[arg-ptr] 2
.	ds space\n[arg-ptr] "\*[space]
.	nr num-args (\n[arg-limit] - \n[arg-ptr])
.	nr arg-limit \n[arg-ptr]
.	if \n[num-args] \
.	parse-space-vector
.	print-recursive
..
.	ec
.	ds sP \s0
.	ds tN \*[Tn-font-size]
d74 6
a79 21
.el \{\
.	de Mx
.	nr cF \\n(.f
.	nr cZ \\n(.s
.	ds aa \&\f\\n(cF\s\\n(cZ
.	if \\n(aC==0 \{\
.		ie \\n(.$==0 \&MirOS\\*(aa
.		el .aV \\$1 \\$2 \\$3 \\$4 \\$5 \\$6 \\$7 \\$8 \\$9
.	\}
.	if \\n(aC>\\n(aP \{\
.		nr aP \\n(aP+1
.		ie \\n(C\\n(aP==2 \{\
.			as b1 \&MirOS\ #\&\\*(A\\n(aP\\*(aa
.			ie \\n(aC>\\n(aP \{\
.				nr aP \\n(aP+1
.				nR
.			\}
.			el .aZ
.		\}
.		el \{\
.			as b1 \&MirOS\\*(aa
d82 5
d88 1
a89 2
.\}
.\"-
d134 1
a134 1
.Pq Sq \- .
d231 1
a231 1
.Dq no\-
a245 2
.It Ar lncp
0x0040: Extract hard links by copying if linking fails.
d353 1
a353 1
.D1 Em original-pathname No \*(Gt\*(Gt Em new-pathname
d426 1
a426 1
.Dl $ tar tvzf backup.tar.gz \*(aq*.jpeg\*(aq
a451 3
unless
.Fl M Ar lncp
is given,
@


1.1.221.3
log
@Import distfile into vendor branch
-r--r--r--  1 tg  miros-cvssrc  136185 Aug 17 09:14 /MirOS/dist/mir/cpio/paxmirabilis-20110817.cpio.gz
-rw-r--r--  1 tg  tg            138201 Aug 17 09:14 paxmirabilis_20110817.orig.tar.gz
@
text
@d1 1
a1 1
.\"	$MirOS: src/bin/pax/tar.1,v 1.18 2011/08/17 09:03:58 tg Exp $
a3 2
.\" Copyright (c) 2005, 2008, 2009, 2011
.\"	Thorsten Glaser <tg@@mirbsd.org>
d27 3
d82 1
a82 1
.Dd $Mdocdate: August 17 2011 $
d153 1
a153 15
.ie \ng==1 \{\
.	ds nc mircpio
.	ds np mirpax
.	ds nt mirtar
.	ds nm mirtar
.	Dt MIRTAR 1
.\}
.el \{\
.	ds nc cpio
.	ds np pax
.	ds nt tar
.	ds nm tar
.	Dt TAR 1
.\}
.\"-
a155 5
.ie \ng==1 \{\
.Nm mirtar
.Nd tape archiver
.\}
.el \{\
a157 1
.\}
d159 1
a159 1
.Nm \*(nm
d161 1
a161 1
.No { Cm crtux No } Op Cm 014578AbefHhLmOoPRSpqsvwXZz
d170 1
a170 1
.Nm \*(nm
d172 1
a172 1
.Op Fl 014578AeHhLmOoPpqRSvwXZz
a254 2
.It Fl A
Write Unix Archiver libraries instead of tape archives.
d293 1
a293 4
is either a numeric value compatible to
.Xr strtonum 3
which is directly stored in the flags word, or
one of the following values, optionally prefixed with
d295 4
a298 1
to turn them off:
a302 2
.br
(cpio, sv4cpio, sv4crc)
a304 2
.br
(cpio, sv4cpio, sv4crc)
a306 2
.br
(ar, cpio, sv4cpio, sv4crc, ustar)
a308 6
.br
(ar, cpio, sv4cpio, sv4crc, ustar)
.It Ar verb
0x0010: Debug this option.
.It Ar debug
0x0020: Debug file header storage.
d310 1
a310 17
0x0040: Extract hard links by copy if link fails.
.It Ar numid
0x0080: Use only numeric uid and gid values.
.br
(ustar)
.It Ar gslash
0x0100: Append a slash after directory names.
.br
(ustar)
.It Ar set
0x0003: Keep ownership and mtime intact.
.It Ar dist
0x008B: Clean everything except mtime.
.It Ar norm
0x008F: Clean everything.
.It Ar root
0x0089: Clean owner and device information.
d313 1
a313 1
This option is only implemented for the ar, cpio, sv4cpio,
d315 5
d463 1
a463 1
.Dl $ \*(nm c bonvole sekve
d474 1
a474 1
.Dl $ \*(nm zcf foriru.tar.gz bonvole sekve
d483 1
a483 1
.Dl $ \*(nm zcvf backup.tar.gz *.c
d491 1
a491 1
.Dl $ \*(nm tvzf backup.tar.gz \*(aq*.jpeg\*(aq
d494 1
a494 1
.Xr \*(np 1 .
a536 1
.Xr ar 1 ,
a537 8
.ie \ng==1 \{\
.Xr mircpio 1 ,
.Xr mirpax 1 ,
.Xr pax 1 ,
.Xr tar 1 ,
.Xr deb 5
.\}
.el \{\
a538 1
.\}
@


1.1.221.4
log
@-rw-r--r--   1 tg  tg  138869 Feb 12 02:14 pax_20120211.orig.tar.gz
-rw-r--r--   1 tg  tg  136890 Feb 12 02:14 paxmirabilis-20120211.cpio.gz
@
text
@d1 2
a2 2
.\"	$MirOS: src/bin/pax/tar.1,v 1.21 2012/02/12 01:48:21 tg Exp $
.\"	$OpenBSD: tar.1,v 1.55 2010/12/02 04:08:27 tedu Exp $
d4 1
a4 1
.\" Copyright (c) 2005, 2008, 2009, 2011, 2012
d81 1
a81 1
.Dd $Mdocdate: February 12 2012 $
a158 7
.el .ie \ng==2 \{\
.	ds nc paxcpio
.	ds np pax
.	ds nt paxtar
.	ds nm paxtar
.	Dt PAXTAR 1
.\}
a172 4
.el .ie \ng==2 \{\
.Nm mirtar
.Nd tape archiver
.\}
d180 1
a180 1
.No { Cm crtux No } Op Cm 014578AbefHhJjLmNOoPRSpqsvwXZz
d186 1
a186 1
.Op Ar
d188 1
d191 1
a191 2
.Bk -words
.Op Fl 014578AeHhJjLmNOoPpqRSvwXZz
d198 1
a198 2
.Op Ar
.Ek
a306 4
.It Fl J
Use the xz utility to compress the archive.
.It Fl j
Use the bzip2 utility to compress the archive.
a365 3
.It Fl N
Same as
.Fl M Ar numid .
d372 1
a372 1
.Nm tar
d477 2
a478 3
Use the
.Xr compress 1
utility to compress the archive.
d480 2
a481 3
Use the
.Xr gzip 1
utility to compress the archive.
a500 11
.Sh EXIT STATUS
The
.Nm
utility exits with one of the following values:
.Pp
.Bl -tag -width Ds -offset indent -compact
.It 0
All files were processed successfully.
.It 1
An error occurred.
.El
d540 9
a589 6
.el .ie \ng==2 \{\
.Xr pax 1 ,
.Xr paxcpio 1 ,
.Xr tar 1 ,
.Xr deb 5
.\}
d595 1
a595 1
.Nm tar
a599 4
.Pp
.Mx
extensions by
.An Thorsten Glaser Aq tg@@mirbsd.org .
d601 12
a612 5
The flags
.Fl AJjLMNRS
are not portable to other implementations of
.Nm tar
where they may have a different meaning.
@


1.1.221.5
log
@*grumble* things you only notice after uploading…
@
text
@d1 1
a1 1
.\"	$MirOS: src/bin/pax/tar.1,v 1.22 2012/02/12 02:49:41 tg Exp $
d181 1
a181 1
.Nm paxtar
@


1.1.221.6
log
@pax_20120520.orig.tar.gz
@
text
@d1 1
a1 1
.\"	$MirOS: src/bin/pax/tar.1,v 1.23 2012/05/20 17:21:45 tg Exp $
d81 1
a81 1
.Dd $Mdocdate: May 20 2012 $
d191 1
a191 1
.No { Cm crtux No } Op Cm 014578AabefHhJjLmNOoPRSpqsvwXZz
d202 1
a202 1
.Op Fl 014578AaeHhJjLmNOoPpqRSvwXZz
a287 10
.It Fl a
Guess the compression utility based on the archive filename.
Inability to guess will result in quietly not using any compression.
This option only exists for semi-compatibility with
.Tn GNU
.Nm tar ;
it is strongly recommended to archive to stdout and pipe into
an external compression utility with appropriate arguments instead:
.Pp
.Dl tar -cf - foo \*(Ba xz -2e \*(Gtfoo.txz
d635 1
a635 1
.Fl AaJjLMNRS
d638 1
a638 1
where they may have a different meaning or not exist at all.
@


1.1.221.7
log
@import prospective paxmirabilis of today into mircpio debian packaging
@
text
@d1 1
a1 1
.\"	$MirOS: src/bin/pax/tar.1,v 1.26 2012/06/05 19:29:34 tg Exp $
a36 2
.\" * <>| are problematic, so redefine and use \*(Lt\*(Gt\*(Ba
.\" Also make sure to use \& especially with two-letter words.
d81 1
a81 1
.Dd $Mdocdate: June 5 2012 $
d83 1
a83 1
.\" Check which macro package we use, and do other -mdoc setup.
a85 2
.	if \*[.T]utf8 .tr \[la]\*(Lt
.	if \*[.T]utf8 .tr \[ra]\*(Gt
d194 1
a194 1
.Op Ar blocking-factor \*(Ba archive \*(Ba replstr
d297 1
a297 1
.Dl tar \-cf \- foo \*(Ba xz \-2e \*(Gtfoo.txz
a648 4
.Sh BUGS
The
.Ar pax
file format is not yet supported.
@


